<!--This is the 2:30PM 8/8/25 version -->
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="PotatoNet 2.0 - A student-built web design project from Antalya Science Center, featuring fun content and silly goober images.">
    <meta name="author" content="Ahmet Efe Ç. and Mehmet E.">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="icon"  href="/assets/images/favicon.jpg" type="image/jpeg">
   
    <title>PotatoNet 2.0</title>
    <style>
        body {
            font-family: 'Poppins', Arial, sans-serif;
            background-color: #000;
            margin: 0;
            padding: 0;
            text-align: center;
            color: white;
            background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRU1DSYgFAh41hWxtJRaXqXmPZtmmFsz5naBQ&s');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: -1;
        }

        #main-content {
            display: none;
            opacity: 0;
            transition: opacity 1.2s ease-in-out;
            overflow-y: auto;
            min-height: 100vh;
            text-align: center;
            padding-bottom: 60px;
            box-sizing: border-box;
        }

        header, nav, footer {
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-weight: 600;
            backdrop-filter: blur(5px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        header {
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        #logoutBtn {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: #dc3545;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            z-index: 1001;
        }

        #logoutBtn:hover {
            background-color: #c82333;
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.5);
        }

        nav {
            padding: 10px;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        nav button {
            margin: 5px;
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.8);
            color: #000;
            border: 2px solid rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        nav button:hover {
            background-color: #000;
            color: #fff;
            border-color: #fff;
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.5);
        }

        .content {
            padding: 30px 20px;
            max-width: 800px;
            margin: 20px auto;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
            text-align: left;
            animation: fadeIn 0.5s ease-in;
        }

        .content h2, .content p {
            text-align: center;
        }

        .hidden {
            display: none;
        }

        footer {
            padding: 10px;
            position: fixed;
            bottom: 0;
            width: 100%;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        img {
            max-width: 100%;
            height: auto;
            margin: 10px auto;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            display: block;
            transition: transform 0.3s ease;
        }

        img:hover {
            transform: scale(1.05);
        }

        #loginModal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRvGjq24VMW8EeLGSe8jchDAh-vbGNfLCW-uA&s');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        #loginModal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        #loginBox {
            background: rgba(34, 34, 34, 0.9);
            padding: 30px 40px;
            border-radius: 15px;
            box-shadow: 0 0 20px #fff;
            text-align: center;
            width: 320px;
            max-width: 90%;
            color: white;
            box-sizing: border-box;
        }

        #loginBox input {
            width: calc(100% - 20px);
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
            border: none;
            font-size: 16px;
            background-color: rgba(255, 255, 255, 0.9);
            color: #333;
        }

        #loginBox button {
            background-color: #fff;
            color: #000;
            font-weight: 600;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        #loginBox button:hover {
            background-color: #4682b4;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.5);
        }

        #loginError {
            color: red;
            margin-top: 10px;
            font-weight: 600;
            display: none;
        }

        #countdown {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            color: #000;
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 20px;
            font-weight: bold;
            z-index: 999999;
            display: none;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        #countdown.low-time {
            background: red;
            color: white;
        }

        @keyframes rainbow {
            0% { color: red; }
            16% { color: orange; }
            33% { color: yellow; }
            50% { color: green; }
            66% { color: blue; }
            83% { color: indigo; }
            100% { color: violet; }
        }

        .rainbow {
            animation: rainbow 2s infinite;
        }

        .gold {
            color: gold;
            text-shadow: 0 0 5px orange, 0 0 10px gold;
        }

        .silver {
            color: silver;
            text-shadow: 0 0 5px gray, 0 0 10px silver;
        }

        #customMessageBox {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            display: none;
        }

        #messageBoxContent {
            background: #222;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            text-align: center;
            color: white;
            max-width: 400px;
            width: 90%;
            box-sizing: border-box;
        }

        #messageBoxContent p {
            margin-bottom: 20px;
            font-size: 18px;
        }

        #messageBoxContent button {
            background-color: #4682b4;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        #messageBoxContent button:hover {
            background-color: #336699;
            transform: translateY(-2px);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 600px) {
            nav { flex-direction: column; }
            #loginBox { padding: 20px; width: 80%; }
            .content { padding: 20px 10px; }
        }
    
        .visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;}
    </style>
</head>
<body>
    <div id="customMessageBox" role="alertdialog" aria-modal="true" aria-labelledby="messageBoxText" tabindex="-1">
        <div id="messageBoxContent">
            <p id="messageBoxText"></p>
            <button onclick="closeMessageBox()">OK</button>
        </div>
    </div>

    <div id="loginModal" role="dialog" aria-modal="true" aria-labelledby="authTitle">
        <div id="loginBox">
            <h2 class="silver" id="authTitle"></h2>
            <h6 class="silver" id="adminOnlyMsg"></h6>
            <label for="username" class="visually-hidden">Username</label>
            <input type="text" id="username" placeholder="Username" aria-label="Username"/>
            <label for="password" class="visually-hidden">Password</label>
            <input type="password" id="password" placeholder="Password" aria-label="Password"/>
            <button id="loginBtn" onclick="handleLogin()">Login</button>
            <button id="signUpBtn" onclick="handleSignUp()" style="display:none;">Sign Up</button>
            <div id="loginError" role="alert"></div>
            <p class="silver" style="margin-top: 15px;">
                <a href="#" id="toggleAuthLink" onclick="toggleAuthMode(event)" style="color: silver; text-decoration: underline;">Don't have an account? Sign Up</a>
            </p>
        </div>
    </div>    

    <div id="main-content">
        <header>
            <h1 class="gold" id="headermain">PotatoNet 2.0</h1>
            <button id="logoutBtn" onclick="logout()" style="display: none;">Log Out</button>
        </header>
        <nav>
            <button onclick="showSection('home')" aria-label="Home Page">Home Page</button>
            <button onclick="showSection('about')" aria-label="About Us">About Us</button>
            <button onclick="showSection('comms')" aria-label="Communications">Communications</button>
            <button onclick="showSection('images')" aria-label="Images">Images</button>
            <button onclick="showSection('images2')" aria-label="Images - Part 2">Images - 2</button>
            <button onclick="showSection('credits')" aria-label="Credits">EPIC CREDITS</button>
        </nav>

        <div id="home" class="content">
            <h2 class="rainbow">Welcome to PotatoNet2.0!</h2>
            <p class="gold">The quick brown fox jumps over the lazy dog</p>
            <p class="silver">Hatayı buldum hocam, onclick'in "'ini unutmuşum :)</p>
            <img src="/assets/images/img_001.jpg" alt="The quick brown fox jumps over the lazy dog" loading="lazy" decoding="async">
            <img src="/assets/images/img_002.jpg" alt="Error fixing" loading="lazy" decoding="async">
            <img src="/assets/images/img_003.jpg" alt="Me after 9 hours" loading="lazy" decoding="async">

        </div>

        <div id="about" class="hidden content">
            <h2>About Us</h2>
            <p>We are a group of students learning web design at Antalya Science Center.</p>
            <img src="/assets/images/img_004.jpg" alt="IT students" loading="lazy" decoding="async">
            <img src="/assets/images/img_005.jpg" alt="Web programming" loading="lazy" decoding="async">

        </div>

        <div id="comms" class="hidden content">
            <h2>Communications</h2>
            <p>Contact us at <strong><a href="mailto:ahmetefecakmak.07200@gmail.com">ahmetefecakmak.07200@gmail.com</a></strong></p>
            <p>Or call us at <strong><a href="tel:+905245245004">+90 (542) 524 50 04</a></strong></p>
            <img src="/assets/images/img_006.jpg" alt="Whatsapp" loading="lazy" decoding="async">
            <img src="/assets/images/img_007.jpg" alt="Email" loading="lazy" decoding="async">

        </div>

        <div id="images" class="hidden content">
            <h2>Silly Goober Images</h2>
            <p>You'd like to see these silly goobers!</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
              <img src="/assets/images/img_008.jpg" alt="Goober number 1" loading="lazy" decoding="async"><img src="/assets/images/img_009.jpg" alt="Goober number 2" loading="lazy" decoding="async">
              <img src="/assets/images/img_010.jpg" alt="Goober number 3" loading="lazy" decoding="async">
              <img src="/assets/images/img_011.jpg" alt="Goober number 4" loading="lazy" decoding="async">
              <img src="/assets/images/img_012.jpg" alt="Goober number 5" loading="lazy" decoding="async">
              <img src="/assets/images/img_013.jpg" alt="Goober number 6" loading="lazy" decoding="async">
            </div>
        </div>

        <div id="images2" class="hidden content">
            <h2>Silly Goober Images - Part 2</h2>
            <p>You might really like these silly thingymabobs!</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
               <img src="/assets/images/img_014.jpg" alt="Goober number 7" loading="lazy" decoding="async">
               <img src="/assets/images/img_015.jpg" alt="Goober number 8" loading="lazy" decoding="async">
               <img src="/assets/images/img_016.jpg" alt="Goober number 9" loading="lazy" decoding="async">
               <img src="/assets/images/img_017.jpg" alt="Goober number 10" loading="lazy" decoding="async">
            </div>
        </div>

        <div id="credits" class="hidden content">
            <h2>Credits</h2>
            <h3>Special thanks to <span class="rainbow">Ahmet Efe Ç.</span> and <span class="rainbow">Mehmet E.</span> for their hard work.</h3>
            <h3>We also thank <span class="rainbow">Antalya Science Center</span> for their web design summer camp, 4-8 August 2025.</h3>
        </div>

        <div id="countdown"><span id="timer" class="rainbow">120</span></div>
        <footer>© 2025 iStealBytes</footer>
    </div>

    <script>
        let inactivityTimer;
        let countdownInterval;
        let remainingTime = 120;
        let activityListenersAdded = false;
        let isIdle = false;
        let currentAuthMode = 'login';

        function showMessageBox(message, callback) {
            const messageBox = document.getElementById('customMessageBox');
            const messageText = document.getElementById('messageBoxText');
            const okButton = document.querySelector('#customMessageBox button');

            messageText.textContent = message;
            messageBox.style.display = 'flex';
            okButton.onclick = () => {
                closeMessageBox();
                if (callback) callback();
            };
        }

        function closeMessageBox() {
            document.getElementById('customMessageBox').style.display = 'none';
        }

        function toggleAuthMode(event) {
            event.preventDefault();
            const authTitle = document.getElementById('authTitle');
            const adminOnlyMsg = document.getElementById('adminOnlyMsg');
            const loginBtn = document.getElementById('loginBtn');
            const signUpBtn = document.getElementById('signUpBtn');
            const toggleAuthLink = document.getElementById('toggleAuthLink');
            const loginError = document.getElementById('loginError');
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');

            usernameInput.value = '';
            passwordInput.value = '';
            loginError.textContent = '';
            loginError.style.display = 'none';

            if (currentAuthMode === 'login') {
                currentAuthMode = 'signup';
                authTitle.textContent = 'Sign Up';
                adminOnlyMsg.style.display = 'none';
                loginBtn.style.display = 'none';
                signUpBtn.style.display = 'block';
                toggleAuthLink.textContent = 'Already have an account? Log In';
            } else {
                currentAuthMode = 'login';
                authTitle.textContent = 'Login';
                adminOnlyMsg.style.display = 'block';
                loginBtn.style.display = 'block';
                signUpBtn.style.display = 'none';
                toggleAuthLink.textContent = "Don't have an account? Sign Up";
            }
        }

        
        async function sha256Hex(message) {
            const encoder = new TextEncoder();
            const data = encoder.encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            return buf2hex(new Uint8Array(hashBuffer));
        }
        function buf2hex(buffer) {
            return Array.prototype.map.call(buffer, x => ('00' + x.toString(16)).slice(-2)).join('');
        }
    
        async function handleLogin() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            const error = document.getElementById('loginError');

            error.textContent = '';
            error.style.display = 'none';

            const isDemousr = (username === "" && password === "");
            const now = Date.now();
            const demoBlockUntil = parseInt(localStorage.getItem('demoBlockUntil') || "0", 10);
            let demoUseCount = parseInt(localStorage.getItem('demoUseCount') || "0", 10);

            if (isDemousr) {
                if (now < demoBlockUntil) {
                    error.textContent = `Demo mode unavailable until ${new Date(demoBlockUntil).toLocaleString()}. Try again later or use a privileged account.`;
                    error.style.display = "block";
                    return;
                }
                if (demoUseCount >= 3) {
                    error.textContent = "Demo mode permanently disabled after 3 uses. Please log in with a privileged account.";
                    error.style.display = "block";
                    return;
                }
                demoUseCount++;
                localStorage.setItem('demoUseCount', demoUseCount);
                loginSuccess(true);
                return;
            }

            const isPrivusr = (false /* removed hardcoded credentials */);
            if (isPrivusr) {
                localStorage.setItem('demoUseCount', "0");
                loginSuccess(false);
                return;
            }

            if (!username || !password) {
                error.textContent = "Please enter both username and password.";
                error.style.display = "block";
                return;
            }

            const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
            // SECURITY WARNING: btoa is insecure for production. Use a backend with proper hashing (e.g., bcrypt).
                        const saltBytes = crypto.getRandomValues(new Uint8Array(16));
            const saltHex = buf2hex(saltBytes);
            const hashHex = await sha256Hex(password + saltHex);
            registeredUsers.push({ username: username, salt: saltHex, hash: hashHex });
            localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));

            showMessageBox("Sign up successful! You can now log in.", () => {
                toggleAuthMode(new Event('click'));
            });
        }

        let isDemoSession=false;
function loginSuccess(isDemo) { isDemoSession = !!isDemo;
            const loginModal = document.getElementById('loginModal');
            const main = document.getElementById('main-content');
            const countdown = document.getElementById('countdown');
            const logoutBtn = document.getElementById('logoutBtn');
            const mainHeaderTitle = document.getElementById('headermain');

            if (loginModal) loginModal.style.display = "none";
            if (main) {
                main.style.display = "block";
                setTimeout(() => {
                    main.style.opacity = 1;
                    if (mainHeaderTitle) {
                        typeWriter(mainHeaderTitle, isDemo ? 'PotatoNet 2.0 Demo User Mode' : 'PotatoNet 2.0', 100);
                    }
                }, 10);
            }
            if (countdown) countdown.style.display = "block";
            if (logoutBtn) logoutBtn.style.display = "block";

            showSection('home');
            startInactivityTimer(isDemo);
            if (!isDemo) addActivityListeners();
        }

        function logout() {
            showMessageBox("Logging out and clearing data...", () => {
                localStorage.removeItem('demoUseCount');
                localStorage.removeItem('demoBlockUntil');
                localStorage.removeItem('registeredUsers');
                location.reload();
            });
        }

        function showSection(sectionId) {
            const sections = ["home", "about", "comms", "images", "images2", "credits"];
            sections.forEach(id => {
                const section = document.getElementById(id);
                if (section) section.classList.add("hidden");
            });

            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove("hidden");
            }
        }

        function startInactivityTimer(isDemo) {
            remainingTime = isDemo ? 60 : 120; // Increased demo timer to 60s
                        clearInterval(countdownInterval);
            updateCountdownDisplay();

            console.log(`[startInactivityTimer] Starting timer. isDemo: ${isDemo}, initial remainingTime: ${remainingTime}`);

            countdownInterval = setInterval(() => {
                remainingTime--;
                updateCountdownDisplay();

                if (remainingTime <= 0) {
                    clearInterval(countdownInterval);
                    if (isDemo) {
                        const blockDuration = 24 * 60 * 60 * 1000;
                        localStorage.setItem('demoBlockUntil', Date.now() + blockDuration);
                        showMessageBox("Your free trial has ended. Try signing up next time!", () => {
                            location.reload();
                        });
                    } else {
                        isIdle = true;
                        showMessageBox("You've been idle. Logging you out!", () => {
                            location.reload();
                        });
                    }
                }
            }, 1000);
        }

        function updateCountdownDisplay() {
            const timerElement = document.getElementById('timer');
            const countdown = document.getElementById('countdown');
            if (timerElement) timerElement.textContent = remainingTime;
            if (countdown) countdown.classList.toggle('low-time', remainingTime <= 10);
        }

        function addActivityListeners() {
            if (activityListenersAdded) return;
            ['click', 'mousemove', 'keypress', 'scroll'].forEach(evt => {
                document.addEventListener(evt, resetTimer);
            });
            activityListenersAdded = true;
        }

        function resetTimer() {
            console.log("[resetTimer] Activity detected. Resetting timer.");
            const isDemoUser = isDemoSession;
            startInactivityTimer(isDemoUser);
        }

        
        function trapFocus(modal) {
            const FOCUSABLE = 'a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])';
            function handleKey(e){
                if (e.key !== 'Tab') return;
                const focusable = Array.from(modal.querySelectorAll(FOCUSABLE)).filter(el=>!el.hasAttribute('disabled') && !el.getAttribute('aria-hidden'));
                if (focusable.length === 0) return;
                const first = focusable[0];
                const last = focusable[focusable.length - 1];
                if (e.shiftKey && document.activeElement === first) { e.preventDefault(); last.focus(); }
                else if (!e.shiftKey && document.activeElement === last) { e.preventDefault(); first.focus(); }
            }
            modal.addEventListener('keydown', handleKey);
        }

        function typeWriter(element, text, speed = 50, callback = null) {
            let i = 0;
            element.textContent = '';
            element.style.opacity = 1;

            function type() {
                if (i < text.length) {
                    element.textContent += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                } else {
                    if (callback) callback();
                }
            }
            type();
        }

        document.addEventListener('DOMContentLoaded', () => {
            const loginModalEl = document.getElementById('loginModal');
            const userEl = document.getElementById('username');
            if (loginModalEl) { trapFocus(loginModalEl); if (userEl) userEl.focus(); }

            const authTitle = document.getElementById('authTitle');
            const adminOnlyMsg = document.getElementById('adminOnlyMsg');
            if (authTitle) typeWriter(authTitle, 'Login', 70);
            if (adminOnlyMsg) typeWriter(adminOnlyMsg, '(Admin only for now, normal logins coming soon)', 40);
        });

        const passwordInput = document.getElementById('password');
        const usernameInput = document.getElementById('username');
        if (passwordInput) {
            passwordInput.addEventListener('keypress', e => {
                if (e.key === 'Enter') {
                    if (currentAuthMode === 'login') handleLogin();
                    else handleSignUp();
                }
            });
        }
        if (usernameInput) {
            usernameInput.addEventListener('keypress', e => {
                if (e.key === 'Enter') {
                    if (currentAuthMode === 'login') handleLogin();
                    else handleSignUp();
                }
            });
        }
    
        document.addEventListener("keydown", (e)=>{
            const box = document.getElementById("customMessageBox");
            if (!box) return;
            if (box.style.display !== "flex") return;
            if (e.key === "Escape") closeMessageBox();
        });
        const msgBoxEl = document.getElementById("customMessageBox");
        if (msgBoxEl) { msgBoxEl.addEventListener("click", (e)=>{ if (e.target === msgBoxEl) closeMessageBox(); }); }

    </script>
</body>
</html>
